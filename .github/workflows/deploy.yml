name: Déployer sur les pages GitHub

on:
  push:
    branches:
      - main   # Déclencher l'action sur les push vers la branche "main"
jobs:
  construire_et_deployer:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout du dépôt
        uses: actions/checkout@v3

      - name: Configuration de Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '22.x'

      - name: Installer les dépendances
        run: npm install

      - name: Exécuter les tests
        run: npm test

      - name: Construction du projet
        run: npm run build -- --output-path=docs   # Changez le chemin de sortie en docs

      - name: Déployer sur les pages GitHub
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GH_TOKEN }}
          publish_dir: docs
